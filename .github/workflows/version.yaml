name: change version

on: create
#on: push

jobs:
  Change-Package-Version:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    #- uses: actions/setup-python@v2
    #  with:
    #    python-version: '3.7'
    
    #- name: change version
    #  run: |
    #    python ${{github.workspace}}/package.json ${{ github.head_ref }}
    - name: change
      run: |
        file=${{github.workspace}}/package.json
        branch=${{github.ref}}
        old_version=`cat ${file} | grep version`
        new_version="\"version\": \"${branch#"v"}\","
        echo "Old: ${old_version}, New: ${new_version}, File: ${file}"
        sed -i "s/${old_version}/${new_version}/g" ${file}
